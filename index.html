<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SystemSync - Remote View</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; text-align: center; }
        #screenCanvas { border: 2px solid #333; background: black; width: 360px; height: auto; }
        .controls { margin-top: 20px; }
        button { padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; border: none; }
        .start { background: #2ecc71; color: white; }
        .stop { background: #e74c3c; color: white; }
    </style>
</head>
<body>
    <h2>Remote Monitor</h2>
    <canvas id="screenCanvas"></canvas>
    <div class="controls">
        <button class="start" onclick="send('START_SCREEN')">START SCREEN</button>
        <button class="stop" onclick="send('STOP_SCREEN')">STOP SCREEN</button>
    </div>
    <script>
        const canvas = document.getElementById('screenCanvas');
        const ctx = canvas.getContext('2d');
        const socket = new WebSocket('wss://mirror-view.onrender.com');

        socket.onmessage = (event) => {
            const data = event.data;
            if (data.startsWith("FRAME:")) {
                const img = new Image();
                img.onload = () => {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                };
                img.src = "data:image/jpeg;base64," + data.substring(6);
            } else if (data === "CLEAR_SCREEN") {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        };

        function send(cmd) { if (socket.readyState === WebSocket.OPEN) socket.send(cmd); }
    </script>
</body>
</html>
