<!DOCTYPE html>
<html>
<head>
    <title>Mirror View Control</title>
    <style>
        body { background: #000; color: #fff; text-align: center; font-family: sans-serif; }
        #remoteView { width: 320px; border: 2px solid #00ff00; background: #222; min-height: 500px; }
        button { margin: 5px; padding: 12px; cursor: pointer; border-radius: 5px; border: none; font-weight: bold; }
        .start { background: #28a745; color: white; }
        .stop { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <h1>Remote Control Panel</h1>
    <img id="remoteView" src="" alt="Waiting for stream..." /><br>
    
    <button class="start" onclick="sendCommand('START_SCREEN')">Enable Auto-ScreenCast</button>
    <button class="stop" onclick="sendCommand('STOP_SCREEN')">Stop & Disconnect</button>

    <script>
        const ws = new WebSocket('wss://mirror-view.onrender.com');
        const view = document.getElementById('remoteView');

        function sendCommand(cmd) {
            ws.send(cmd);
        }

        ws.onmessage = (event) => {
            const data = event.data;
            if (data.startsWith("FRAME:")) {
                // Update the image source with the Base64 frame
                view.src = "data:image/jpeg;base64," + data.substring(6);
            }
        };
    </script>
</body>
</html>
